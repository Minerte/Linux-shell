# This is for gentoo-source-kernel build to enable for the setup of Full disk encryption

#
# genkernel --firmware --keymap --oldconfig --install all
#

# General Kernel Settings
CONFIG_64BIT=y
CONFIG_X86_64=y
CONFIG_X86=y
CONFIG_ARCH_MMAP_RND_BITS=32
CONFIG_ARCH_MMAP_RND_COMPAT_BITS=16
CONFIG_ARCH_SUPPORTS_LUKS=y
CONFIG_ARCH_SUPPORTS_INITRAMFS=y
CONFIG_INITRAMFS_SOURCE="/usr/src/initramfs"
CONFIG_INITRAMFS_ROOT_UID=0
CONFIG_INITRAMFS_ROOT_GID=0
CONFIG_RD_GZIP=y
CONFIG_INITRAMFS_COMPRESSION_GZIP=y
CONFIG_BLK_DEV_INITRD=y
CONFIG_FW_LOADER=y
CONFIG_SYSTEMD=n
CONFIG_UEVENT_HELPER=n

# Filesystem Support
CONFIG_BTRFS_FS=y
CONFIG_BTRFS_FS_POSIX_ACL=y
CONFIG_EXT4_FS=y
CONFIG_VFAT_FS=y
CONFIG_FAT_DEFAULT_UTF8=y
CONFIG_NTFS3_FS=y
CONFIG_TMPFS=y

# EFI and UEFI Boot Support
CONFIG_EFI_STUB=y
CONFIG_EFI=y
CONFIG_EFI_VARS=y
CONFIG_EFI_PARTITION=y
CONFIG_FB_EFI=y

# Device Mapper and Disk Encryption (LUKS)
CONFIG_MD=y
CONFIG_BLK_DEV_DM=y
CONFIG_DM_CRYPT=y

# Cryptographic Options
CONFIG_CRYPTO_USER=y
CONFIG_CRYPTO_XTS=y
CONFIG_CRYPTO_SHA512=y
CONFIG_CRYPTO_AES=y
CONFIG_CRYPTO_ANSI_CPRNG=y
CONFIG_CRYPTO_DRBG=y
CONFIG_CRYPTO_JITTERENTROPY=y
CONFIG_CRYPTO_USER_API=y
CONFIG_CRYPTO_USER_API_HASH=y
CONFIG_CRYPTO_USER_API_SKCIPHER=y
CONFIG_CRYPTO_BLOWFISH=y
CONFIG_CRYPTO_SERPENT=y
CONFIG_CRYPTO_TWOFISH=y
CONFIG_CRYPTO_DEV_CCP=y

# Key Retention and GPG Support
CONFIG_KEYS=y
CONFIG_KEYS_REQUEST_CACHE=y
CONFIG_KEYS_DEBUG_PROC_KEYS=y
CONFIG_ENCRYPTED_KEYS=y
CONFIG_TRUSTED_KEYS=y
CONFIG_KEY_DH_OPERATIONS=y
CONFIG_CRYPTO_PGP=y

# Security and IPC
CONFIG_SYSVIPC=y

# USB Support
CONFIG_USB=y
CONFIG_USB_STORAGE=y
CONFIG_USB_SUPPORT=y
CONFIG_USB_XHCI_HCD=y
CONFIG_USB_EHCI_HCD=y
CONFIG_USB_OHCI_HCD=y

# Keyboard & Input
CONFIG_HID=y
CONFIG_HID_GENERIC=y
CONFIG_INPUT_KEYBOARD=y
CONFIG_KEYBOARD_ATKBD=y
CONFIG_VT=y
CONFIG_VT_CONSOLE=y
CONFIG_UNICODE=y
CONFIG_VT_CONSOLE_SLEEP=y
CONFIG_VGA_CONSOLE=y
CONFIG_FRAMEBUFFER_CONSOLE=y

# Graphics Support
CONFIG_DRM=y
CONFIG_DRM_KMS_HELPER=y
CONFIG_FB=y
CONFIG_WAYLAND=y

# AMD Radeon GPU Support
CONFIG_DRM_AMDGPU=y
CONFIG_DRM_AMDGPU_SI=y
CONFIG_DRM_AMDGPU_CIK=y
CONFIG_DRM_AMDGPU_USERPTR=y
CONFIG_HSA_AMD=y
CONFIG_AMD_IOMMU=y
CONFIG_AMD_IOMMU_V2=y
CONFIG_FB_RADEON=y
CONFIG_DRM_RADEON=y
CONFIG_DRM_RADEON_SI=y
CONFIG_DRM_RADEON_CIK=y

# NVIDIA GPU Support (Nouveau Driver)
CONFIG_DRM_NOUVEAU=y
CONFIG_NOUVEAU_LEGACY_CTX_SUPPORT=y
CONFIG_DRM_NOUVEAU_BACKLIGHT=y
CONFIG_FB_NVIDIA=n
CONFIG_FB_NVIDIA_I2C=n
CONFIG_FB_NVIDIA_DEBUG=n
CONFIG_FB_NVIDIA_BACKLIGHT=n

# Virtualization (KVM)
CONFIG_KVM=y
CONFIG_KVM_AMD=y
CONFIG_VIRTUALIZATION=y

# Bluetooth Support
CONFIG_BT=y
CONFIG_BT_HIDP=y
CONFIG_BT_RFCOMM=y
CONFIG_BT_BREDR=y
CONFIG_BT_HCIBTUSB=y

# Disable Systemd-related Kernel Features
CONFIG_SYSFS_DEPRECATED=n
CONFIG_SYSFS_DEPRECATED_V2=n
CONFIG_AUDIT=n
CONFIG_CGROUPS=n
CONFIG_DEVPTS_MULTIPLE_INSTANCES=n
CONFIG_FHANDLE=n
CONFIG_SIGNALFD=n
CONFIG_TIMERFD=n
CONFIG_EPOLL=n
CONFIG_NET=n
CONFIG_SYSFS=n
CONFIG_PROC_FS=n
CONFIG_FANOTIFY=n
CONFIG_INOTIFY_USER=n
CONFIG_UEVENT_HELPER=n
